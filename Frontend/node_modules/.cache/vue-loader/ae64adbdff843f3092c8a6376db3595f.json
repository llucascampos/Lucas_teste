{"remainingRequest":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\src\\components\\TabelaMotorista.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\src\\components\\TabelaMotorista.vue","mtime":1555934168870},{"path":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555932458939},{"path":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1555932536551},{"path":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1555932457947},{"path":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1555932540583},{"path":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555932458939},{"path":"C:\\Users\\Lucas\\Desktop\\Lucas_teste\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1555932537837}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport axios from 'axios'\r\nimport FuncoesCompartilhadas from '../mixins/FuncoesCompartilhadas.js'\r\nvar urlPadrao = 'https://backend-dot-lucas-teste-238218.appspot.com/'\r\nexport default {\r\n  mixins: [FuncoesCompartilhadas],\r\n   data: () => ({\r\n      dialog: false,\r\n      headers: [\r\n        { text: 'Nome',                align: 'left', value: 'nome',       sortable: false},\r\n        { text: 'CPF',                 align: 'left', value: 'cpf',        sortable: false },\r\n        { text: 'Data de Nascimento',  align: 'left', value: 'nascimento', sortable: false },\r\n        { text: 'Modelo do Carro',     align: 'left', value: 'modeloCarro',sortable: false },\r\n        { text: 'Sexo',                align: 'left', value: 'sexo',       sortable: false },\r\n        { text: 'Status',              align: 'left', value: 'status',     sortable: false },\r\n        { text: 'Ações',                              value: 'acoes',      sortable: false }\r\n      ],\r\n\r\n      listaMotoristas: [],\r\n      editarIndex: -1,\r\n      motorista: {\r\n        nome: '',\r\n        cpf: '',\r\n        nascimento: '',\r\n        modeloCarro: null,\r\n        sexo: null,\r\n        ativo: false\r\n      },\r\n      defaultItem: {\r\n        nome: '',\r\n        cpf: '',\r\n        nascimento: '',\r\n        modeloCarro: null,\r\n        sexo: null,\r\n        ativo: false\r\n      },\r\n      filtrarPor: null,\r\n      filtro: '',\r\n      opcoesFiltro: ['Nome', 'CPF', 'Modelo do Carro', 'Sexo'],\r\n           \r\n      //validação\r\n      obrigatorio: [\r\n        v => !!v || 'Esse campos é necessário'\r\n      ],\r\n\r\n    }),\r\n\r\n    computed: {\r\n      formTitle () {\r\n        return this.editarIndex === -1 ? 'Adicionar Motorista' : 'Editar Motorista'\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      dialog (val) {\r\n        val || this.fechar()\r\n      }\r\n    },\r\n\r\n    created () {\r\n      this.inicializando()\r\n    },\r\n\r\n    methods: {\r\n      inicializando () {\r\n        axios\r\n          axios.get(`${urlPadrao}/motoristas`, \r\n          { \r\n            headers: {\r\n              'content-type': 'application/json',\r\n              'Accept': 'application/json',\r\n              'Access-Control-Allow-Credentials':true,\r\n              'Access-Control-Allow-Origin':true\r\n          }})\r\n          .then(response => {\r\n            this.listaMotoristas = response.data.response\r\n            console.log(response.data)\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            this.errored = true\r\n          })\r\n      },\r\n\r\n      editarItem (item) {\r\n        this.editarIndex = this.listaMotoristas.indexOf(item)\r\n        this.motorista = Object.assign({}, item)\r\n        this.motorista.nascimento = this.formatarData(this.motorista.dataNascimento)\r\n        console.log(this.motorista)\r\n        this.dialog = true\r\n      },\r\n    \r\n      fechar () {\r\n        this.dialog = false\r\n        setTimeout(() => {\r\n          this.$refs.form.resetValidation()\r\n          this.motorista = Object.assign({}, this.defaultItem)\r\n          this.editarIndex = -1\r\n        }, 300)\r\n      },\r\n\r\n      salvar () {\r\n        if(this.$refs.form.validate()){\r\n          if(this.editarIndex > -1) {\r\n            this.motorista.nascimento = this.formataDataParaBanco(this.motorista.nascimento)\r\n            this.motorista.cpf = this.formatarCpf(this.motorista.cpf)\r\n            axios.put(`${urlPadrao}/motoristas`, this.motorista\r\n          ).then(response => {\r\n            this.text = \"Atualizado com sucesso\"\r\n            this.snackbar = true\r\n            this.inicializando()\r\n            this.fechar()\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            this.errored = true\r\n          })\r\n          } else {\r\n            this.motorista.nascimento = this.formataDataParaBanco(this.motorista.nascimento)\r\n            this.motorista.cpf = this.formatarCpf(this.motorista.cpf)\r\n            axios.post(`${urlPadrao}/motoristas`, this.motorista)\r\n              .then(response =>{ \r\n                this.snackbar = true\r\n                this.inicializando()                       \r\n            });  \r\n          }\r\n          this.fechar()\r\n        }\r\n      },\r\n\r\n      formatarStatus(status){\r\n         return status == 0 ? 'Inativo' : 'Ativo'\r\n      },\r\n\r\n      filtrar(){    \r\n          axios.get(`${urlPadrao}/motoristas/filtrar/${this.filtrarPor}/${this.filtro}`,\r\n          { \r\n            headers: {\r\n              'content-type': 'application/json',\r\n              'Accept': 'application/json',\r\n              'Access-Control-Allow-Credentials':true,\r\n              'Access-Control-Allow-Origin':true\r\n           }})\r\n          .then(response => {\r\n            this.listaMotoristas = response.data.response\r\n            console.log(response.data)\r\n          })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.errored = true\r\n            })       \r\n        },\r\n    }\r\n}\r\n",{"version":3,"sources":["TabelaMotorista.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabelaMotorista.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n      <v-layout>\r\n        <v-snackbar\r\n          v-model=\"snackbar\"\r\n          :color=\"color\"\r\n          :multi-line=\"mode === 'multi-line'\"\r\n          :timeout=\"timeout\"\r\n          :vertical=\"mode === 'vertical'\"\r\n          :top=\"y === 'top'\"\r\n        >\r\n          {{ text }}\r\n          <v-btn dark flat @click=\"snackbar = false\">Fechar</v-btn>\r\n        </v-snackbar>\r\n      </v-layout>\r\n\r\n      <div class=\" mt-3 mb-5\">\r\n        <v-layout wrap justify-space-around>\r\n            <v-flex xs12 sm4 md4>\r\n                <v-autocomplete\r\n                    v-model=\"filtrarPor\"\r\n                    :items=\"opcoesFiltro\"\r\n                    label=\"Filtrar Por\"\r\n                ></v-autocomplete>\r\n            </v-flex>\r\n            <v-flex xs12 sm4 md4>\r\n                <v-text-field v-model='filtro' :label='this.filtrarPor' :disabled=\"this.filtrarPor == null\"></v-text-field>\r\n            </v-flex>\r\n            <v-flex  sm2>\r\n              <v-btn color=\"primary\" :disabled=\"this.filtro == ''\" @click=\"filtrar()\">Filtrar</v-btn>\r\n            </v-flex>\r\n        </v-layout>\r\n    </div>\r\n\r\n    <v-toolbar>\r\n      <v-toolbar-title>Motoristas</v-toolbar-title>\r\n      <v-spacer></v-spacer>\r\n      <v-tooltip top>\r\n        <template v-slot:activator=\"{ on }\">\r\n          <v-btn v-on=\"on\" fab dark color=\"green\" @click=\"inicializando()\" small> <v-icon dark>replay</v-icon></v-btn>\r\n        </template>\r\n        <span>Atualizar página</span>\r\n      </v-tooltip>\r\n\r\n      <v-tooltip top>\r\n        <template v-slot:activator=\"{ on }\">\r\n          <v-btn v-on=\"on\" fab dark color=\"primary\" @click=\"dialog = true\" small> <v-icon dark>add</v-icon></v-btn>\r\n        </template>\r\n        <span>Adicionar novo motorista</span>\r\n      </v-tooltip>\r\n    </v-toolbar>\r\n\r\n     <v-dialog v-model=\"dialog\" max-width=\"70%\"  persistent>\r\n        <v-card justify-center>\r\n          <v-form ref=\"form\">\r\n            <v-card-title>\r\n              <span class=\"headline\">{{ formTitle }}</span>\r\n            </v-card-title>\r\n\r\n            <v-card-text>\r\n              <v-container grid-list-md>\r\n                <v-layout wrap justify-center>\r\n                  <v-flex xs12 sm6 md10>\r\n                    <v-text-field v-model=\"motorista.nome\" label=\"Nome\" :rules=\"obrigatorio\"   append-icon=\"face\"></v-text-field>\r\n                  </v-flex>\r\n                </v-layout>\r\n                <v-layout wrap justify-center>\r\n                  <v-flex xs12 sm6 md10>\r\n                    <v-text-field v-model=\"motorista.cpf\" label=\"CPF\" :rules=\"documentoValido\" v-mask=\"'###.###.###-##'\"   append-icon=\"perm_identity\"></v-text-field>\r\n                  </v-flex>\r\n                </v-layout>\r\n                <v-layout wrap justify-center>\r\n                  <v-flex xs12 sm6 md10>\r\n                    <v-text-field v-model=\"motorista.nascimento\" label=\"Data de Nascimento\"  :rules=\"dataValida\" v-mask=\"'##/##/####'\"   append-icon=\"date_range\"></v-text-field>\r\n                  </v-flex>\r\n                </v-layout>\r\n                <v-layout wrap justify-center>\r\n                  <v-flex xs12 sm6 md10>\r\n                    <v-text-field v-model=\"motorista.modeloCarro\" label=\"Modelo Do Carro\" :rules=\"obrigatorio\"   append-icon=\"drive_eta\"></v-text-field>\r\n                  </v-flex>\r\n                </v-layout>\r\n                <v-layout wrap justify-center>\r\n                  <v-flex xs12 sm6 md5>\r\n                    <v-radio-group v-model=\"motorista.sexo\" :mandatory=\"false\" row :rules=\"obrigatorio\">\r\n                      <v-radio label=\"Masculino\" value=\"Masculino\"></v-radio>\r\n                      <v-radio label=\"Feminino\"  value=\"Feminino\"></v-radio>\r\n                    </v-radio-group>\r\n                  </v-flex>\r\n                  <v-flex xs12 sm6 md3>\r\n                    <v-switch v-model=\"motorista.ativo\" :label=\" `Status:  ${formatarStatus(this.motorista.ativo)}`\"></v-switch>\r\n                  </v-flex>\r\n                </v-layout>\r\n              </v-container>\r\n            </v-card-text>\r\n\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn color=\"blue darken-1\" flat @click=\"fechar\">Cancelar</v-btn>\r\n              <v-btn color=\"blue darken-1\" flat @click=\"salvar\">Salvar</v-btn>\r\n            </v-card-actions>\r\n          </v-form>\r\n        </v-card>\r\n      </v-dialog>\r\n      \r\n      <v-data-table :headers=\"headers\" :items=\"listaMotoristas\"  hide-actions class=\"elevation-1\" no-data-text=\"Sem Dados\">\r\n        <v-progress-linear slot=\"progress\" color=\"blue\" indeterminate></v-progress-linear>\r\n        <template v-slot:items=\"props\">\r\n          <td class=\"text-xs-left\">{{ props.item.nome }}</td>\r\n          <td class=\"text-xs-left\">{{  mCpf(props.item.cpf) }}</td>\r\n          <td class=\"text-xs-left\">{{ formatarData(props.item.dataNascimento) }}</td>\r\n          <td class=\"text-xs-left\">{{ props.item.modeloCarro }}</td>\r\n          <td class=\"text-xs-left\">{{ props.item.sexo }}</td>\r\n          <td class=\"text-xs-left\">{{ formatarStatus(props.item.ativo) }}</td>\r\n          <td class=\"justify-center layout px-0\">\r\n             <v-tooltip top>\r\n              <template v-slot:activator=\"{ on }\">\r\n                <v-icon  class=\"mr-2\" @click=\"editarItem(props.item)\">edit</v-icon>\r\n              </template>\r\n              <span>Editar</span>\r\n            </v-tooltip>\r\n          </td>\r\n        </template>\r\n      </v-data-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport FuncoesCompartilhadas from '../mixins/FuncoesCompartilhadas.js'\r\nvar urlPadrao = 'https://backend-dot-lucas-teste-238218.appspot.com/'\r\nexport default {\r\n  mixins: [FuncoesCompartilhadas],\r\n   data: () => ({\r\n      dialog: false,\r\n      headers: [\r\n        { text: 'Nome',                align: 'left', value: 'nome',       sortable: false},\r\n        { text: 'CPF',                 align: 'left', value: 'cpf',        sortable: false },\r\n        { text: 'Data de Nascimento',  align: 'left', value: 'nascimento', sortable: false },\r\n        { text: 'Modelo do Carro',     align: 'left', value: 'modeloCarro',sortable: false },\r\n        { text: 'Sexo',                align: 'left', value: 'sexo',       sortable: false },\r\n        { text: 'Status',              align: 'left', value: 'status',     sortable: false },\r\n        { text: 'Ações',                              value: 'acoes',      sortable: false }\r\n      ],\r\n\r\n      listaMotoristas: [],\r\n      editarIndex: -1,\r\n      motorista: {\r\n        nome: '',\r\n        cpf: '',\r\n        nascimento: '',\r\n        modeloCarro: null,\r\n        sexo: null,\r\n        ativo: false\r\n      },\r\n      defaultItem: {\r\n        nome: '',\r\n        cpf: '',\r\n        nascimento: '',\r\n        modeloCarro: null,\r\n        sexo: null,\r\n        ativo: false\r\n      },\r\n      filtrarPor: null,\r\n      filtro: '',\r\n      opcoesFiltro: ['Nome', 'CPF', 'Modelo do Carro', 'Sexo'],\r\n           \r\n      //validação\r\n      obrigatorio: [\r\n        v => !!v || 'Esse campos é necessário'\r\n      ],\r\n\r\n    }),\r\n\r\n    computed: {\r\n      formTitle () {\r\n        return this.editarIndex === -1 ? 'Adicionar Motorista' : 'Editar Motorista'\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      dialog (val) {\r\n        val || this.fechar()\r\n      }\r\n    },\r\n\r\n    created () {\r\n      this.inicializando()\r\n    },\r\n\r\n    methods: {\r\n      inicializando () {\r\n        axios\r\n          axios.get(`${urlPadrao}/motoristas`, \r\n          { \r\n            headers: {\r\n              'content-type': 'application/json',\r\n              'Accept': 'application/json',\r\n              'Access-Control-Allow-Credentials':true,\r\n              'Access-Control-Allow-Origin':true\r\n          }})\r\n          .then(response => {\r\n            this.listaMotoristas = response.data.response\r\n            console.log(response.data)\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            this.errored = true\r\n          })\r\n      },\r\n\r\n      editarItem (item) {\r\n        this.editarIndex = this.listaMotoristas.indexOf(item)\r\n        this.motorista = Object.assign({}, item)\r\n        this.motorista.nascimento = this.formatarData(this.motorista.dataNascimento)\r\n        console.log(this.motorista)\r\n        this.dialog = true\r\n      },\r\n    \r\n      fechar () {\r\n        this.dialog = false\r\n        setTimeout(() => {\r\n          this.$refs.form.resetValidation()\r\n          this.motorista = Object.assign({}, this.defaultItem)\r\n          this.editarIndex = -1\r\n        }, 300)\r\n      },\r\n\r\n      salvar () {\r\n        if(this.$refs.form.validate()){\r\n          if(this.editarIndex > -1) {\r\n            this.motorista.nascimento = this.formataDataParaBanco(this.motorista.nascimento)\r\n            this.motorista.cpf = this.formatarCpf(this.motorista.cpf)\r\n            axios.put(`${urlPadrao}/motoristas`, this.motorista\r\n          ).then(response => {\r\n            this.text = \"Atualizado com sucesso\"\r\n            this.snackbar = true\r\n            this.inicializando()\r\n            this.fechar()\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            this.errored = true\r\n          })\r\n          } else {\r\n            this.motorista.nascimento = this.formataDataParaBanco(this.motorista.nascimento)\r\n            this.motorista.cpf = this.formatarCpf(this.motorista.cpf)\r\n            axios.post(`${urlPadrao}/motoristas`, this.motorista)\r\n              .then(response =>{ \r\n                this.snackbar = true\r\n                this.inicializando()                       \r\n            });  \r\n          }\r\n          this.fechar()\r\n        }\r\n      },\r\n\r\n      formatarStatus(status){\r\n         return status == 0 ? 'Inativo' : 'Ativo'\r\n      },\r\n\r\n      filtrar(){    \r\n          axios.get(`${urlPadrao}/motoristas/filtrar/${this.filtrarPor}/${this.filtro}`,\r\n          { \r\n            headers: {\r\n              'content-type': 'application/json',\r\n              'Accept': 'application/json',\r\n              'Access-Control-Allow-Credentials':true,\r\n              'Access-Control-Allow-Origin':true\r\n           }})\r\n          .then(response => {\r\n            this.listaMotoristas = response.data.response\r\n            console.log(response.data)\r\n          })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.errored = true\r\n            })       \r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}